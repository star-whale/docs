"use strict";(self.webpackChunkstarwhale_docs=self.webpackChunkstarwhale_docs||[]).push([[9391],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>m});var n=a(7294);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var s=n.createContext({}),c=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},u=function(e){var t=c(e.components);return n.createElement(s.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=c(a),m=l,d=p["".concat(s,".").concat(m)]||p[m]||h[m]||o;return a?n.createElement(d,r(r({ref:t},u),{},{components:a})):n.createElement(d,r({ref:t},u))}));function m(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var o=a.length,r=new Array(o);r[0]=p;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:l,r[1]=i;for(var c=2;c<o;c++)r[c]=a[c];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},2867:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});var n=a(3117),l=(a(7294),a(3905));const o={title:"Run Llama 2-Chat from scratch in 5 minutes",description:"docusaurus-plugin-content-blog",slug:"run-llama2-chat-in-five-minutes",authors:[{name:"Starwhale"}],tags:["Model Package","llama2"],image:"https://starwhale.cn/assets/images/banner-9c279049eb74ef96a8c1eb6ac3636360.jpg",hide_table_of_contents:!1},r=void 0,i={permalink:"/blog/run-llama2-chat-in-five-minutes",source:"@site/blog/2023-07-24-run-llama-2-chat-in-five-minutes.md",title:"Run Llama 2-Chat from scratch in 5 minutes",description:"docusaurus-plugin-content-blog",date:"2023-07-24T00:00:00.000Z",formattedDate:"July 24, 2023",tags:[{label:"Model Package",permalink:"/blog/tags/model-package"},{label:"llama2",permalink:"/blog/tags/llama-2"}],readingTime:3.945,hasTruncateMarker:!1,authors:[{name:"Starwhale"}],frontMatter:{title:"Run Llama 2-Chat from scratch in 5 minutes",description:"docusaurus-plugin-content-blog",slug:"run-llama2-chat-in-five-minutes",authors:[{name:"Starwhale"}],tags:["Model Package","llama2"],image:"https://starwhale.cn/assets/images/banner-9c279049eb74ef96a8c1eb6ac3636360.jpg",hide_table_of_contents:!1},prevItem:{title:"Reporduce and compare evaluations using Starwhale",permalink:"/blog/reproduce-and-compare-evals"},nextItem:{title:"What is Starwhale?",permalink:"/blog/intro-starwhale"}},s={authorsImageUrls:[void 0]},c=[{value:"What is Llama 2",id:"what-is-llama-2",level:2},{value:"What is Starwhale",id:"what-is-starwhale",level:2},{value:"how to use Starwhale to run Llama 2-Chat",id:"how-to-use-starwhale-to-run-llama-2-chat",level:2},{value:"<strong>1. Login</strong>",id:"1-login",level:3},{value:"<strong>2. Create a project</strong>",id:"2-create-a-project",level:3},{value:"<strong>3. Run the model</strong>",id:"3-run-the-model",level:3},{value:"<strong>4. View the Results and Logs</strong>",id:"4-view-the-results-and-logs",level:4}],u={toc:c};function h(e){let{components:t,...a}=e;return(0,l.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Meta Llama 2, once released captured the attention of the entire world. ",(0,l.kt)("a",{parentName:"p",href:"https://starwhale.cn/"},"Starwhale")," has specially developed the Llama 2-Chat and Llama 2-7b model packages. In just 5 minutes, you can engage in a conversation with Llama 2-Chat from scratch on ",(0,l.kt)("a",{parentName:"p",href:"https://cloud.starwhale.cn"},"https://cloud.starwhale.cn"),"."),(0,l.kt)("p",null,"In the future, we will also provide model packages for Llama 2-13b and Llama 2-70b. Interested friends, please stay tuned!"),(0,l.kt)("p",null,"The following will provide a detailed introduction to what is Llama 2, what is Starwhale, and how to use Starwhale to run Llama 2-Chat."),(0,l.kt)("h2",{id:"what-is-llama-2"},"What is Llama 2"),(0,l.kt)("p",null,"The Llama 2 series models are a set of large language models that utilize optimized autoregressive Transformer architecture. They have undergone pre-training and fine-tuning and come in three parameter versions: 7 billion, 13 billion, and 70 billion. Additionally, Meta has trained a 34 billion parameter version, but it has not been released, and relevant data is mentioned in the research paper."),(0,l.kt)("p",null,"Pre-training: Compared to Llama 1, Llama 2's training data has increased by 40%, using 2 trillion tokens for training, and the context length is twice that of Llama 1, reaching 4096. Llama 2 is well-suited for various natural language generation tasks."),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://starwhale-examples.oss-cn-beijing.aliyuncs.com/docs/blog/llama2/cmp1-2.png",alt:"image"})),(0,l.kt)("p",null,"Meta compared the results of Llama 2-70b with closed-source models and found that its performance is close to GPT-3.5 on MMLU (Multilingual Multimodal Language Understanding) and GSM8K (German Speech Recognition) tasks. However, there are significant differences in performance on encoding benchmarks."),(0,l.kt)("p",null,"Moreover, on almost all benchmarks, Llama 2-70b performs on par with or even better than Google's PaLM-540b model. But there still remains a considerable gap in performance when compared to models like GPT-4 and PaLM-2-L."),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://starwhale-examples.oss-cn-beijing.aliyuncs.com/docs/blog/llama2/evaluation.png",alt:"image"})),(0,l.kt)("p",null,"Fine-tuning: Llama 2-Chat is a version of Llama 2 that has been fine-tuned specifically for chat dialogue scenarios. The fine-tuning process involves using SFT (Supervised Fine-Tuning) and RLHF (Reinforcement Learning from Human Feedback) in an iterative optimization to align better with human preferences and improve safety. The fine-tuning data includes publicly available instruction datasets and over one million newly annotated samples. Llama 2-Chat can be used for chat applications similar to virtual assistants. The image below shows the percentage of violations in single-turn and multi-turn conversations. Compared to the baseline, Llama 2-Chat performs particularly well in multi-turn conversations."),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://starwhale-examples.oss-cn-beijing.aliyuncs.com/docs/blog/llama2/voliation.png",alt:"image"})),(0,l.kt)("h2",{id:"what-is-starwhale"},"What is Starwhale"),(0,l.kt)("p",null,"Starwhale is an MLOps platform that offers a comprehensive solution for the entire machine learning operations process. It enables developers and businesses to efficiently and conveniently manage model hosting, execution, evaluation, deployment, and dataset management. Users can choose from three different versions: Standalone, Server, or Cloud, based on their specific requirements. For more detailed information and instructions on using Starwhale, users can refer to the platform's ",(0,l.kt)("a",{parentName:"p",href:"https://starwhale.cn/docs/"},"documentation"),"."),(0,l.kt)("h2",{id:"how-to-use-starwhale-to-run-llama-2-chat"},"how to use Starwhale to run Llama 2-Chat"),(0,l.kt)("p",null,"Workflow\uff1aLogin \u2192 Create a project \u2192 Run the model \u2192 Chat with Llama2"),(0,l.kt)("h3",{id:"1-login"},(0,l.kt)("strong",{parentName:"h3"},"1. Login")),(0,l.kt)("p",null,"First, you need to log in to the Starwhale platform by clicking on the ",(0,l.kt)("a",{parentName:"p",href:"https://cloud.starwhale.cn/login?lang=zh"},"login"),". If you haven't registered yet, you can click on the ",(0,l.kt)("a",{parentName:"p",href:"https://cloud.starwhale.cn/signup"},"sign-up")," to create an account."),(0,l.kt)("h3",{id:"2-create-a-project"},(0,l.kt)("strong",{parentName:"h3"},"2. Create a project")),(0,l.kt)("p",null,"After successful login, you will be directed to the project list page. Click on the Create button on the top right corner to create a new project. Enter the project name and click on the Submit button to create the project."),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://starwhale-examples.oss-cn-beijing.aliyuncs.com/docs/blog/llama2/project-list.png",alt:"image"})),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://starwhale-examples.oss-cn-beijing.aliyuncs.com/docs/blog/llama2/project-create.png",alt:"image"})),(0,l.kt)("h3",{id:"3-run-the-model"},(0,l.kt)("strong",{parentName:"h3"},"3. Run the model")),(0,l.kt)("p",null,"Go to the job list page and click on the Create task button."),(0,l.kt)("p",null," 1) Choose the running resource, you can select A100 80G1 (recommended) or A10 24G1.\n2) Select the model: starwhale/public/llama2-7b-chat/ki72ulaf(latest).\n3) Choose the handler: Run the chatbot model, select the default option: evaluation:chatbot.\n4) Choose the runtime: Select the default option, built-in.\n5) Advanced configuration: Turn on the auto-release switch, where you can set the duration after which the task will be automatically canceled. If you don't set auto-release, you can manually cancel the task after the experiment is completed."),(0,l.kt)("p",null,"Click on Submit to run the model."),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://starwhale-examples.oss-cn-beijing.aliyuncs.com/docs/blog/llama2/evaluation-create.png",alt:"image"})),(0,l.kt)("h4",{id:"4-view-the-results-and-logs"},(0,l.kt)("strong",{parentName:"h4"},"4. View the Results and Logs")),(0,l.kt)("p",null,"The job list page allows you to view all the tasks in the project."),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://starwhale-examples.oss-cn-beijing.aliyuncs.com/docs/blog/llama2/job-list.png",alt:"image"})),(0,l.kt)("p",null,"Click on the Job ID to enter the task details page, and then click on View Logs to see the logs."),(0,l.kt)("p",null,"The total time taken from task submission to model execution is 5 minutes."),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://starwhale-examples.oss-cn-beijing.aliyuncs.com/docs/blog/llama2/log.png",alt:"image"})),(0,l.kt)("p",null,"Once the execution is successful, return to the task list and click on the Terminal button to open the chatbox page. You can now start a conversation with Llama 2-Chat on the chatbox page."),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://starwhale-examples.oss-cn-beijing.aliyuncs.com/docs/blog/llama2/job-list.png",alt:"image"})),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://starwhale-examples.oss-cn-beijing.aliyuncs.com/docs/blog/llama2/chatbot.png",alt:"image"})),(0,l.kt)("p",null,"These are the instructions on how to use Starwhale Cloud to run Llama 2-Chat. If you encounter any issues during the process, please feel free to leave a private message. You can also visit the ",(0,l.kt)("a",{parentName:"p",href:"https://starwhale.cn"},"Starwhale official website")," for more information. Thank you for your attention and support."))}h.isMDXComponent=!0}}]);